[debug] [2025-11-13T01:31:18.442Z] ----------------------------------------------------------------------
[debug] [2025-11-13T01:31:18.444Z] Command:       /Users/tahmeedrahim/.nvm/versions/node/v22.21.0/bin/node /Users/tahmeedrahim/.nvm/versions/node/v22.21.0/bin/firebase emulators:start --only functions --project ndcpharma-8f3c6
[debug] [2025-11-13T01:31:18.444Z] CLI Version:   14.23.0
[debug] [2025-11-13T01:31:18.444Z] Platform:      darwin
[debug] [2025-11-13T01:31:18.444Z] Node Version:  v22.21.0
[debug] [2025-11-13T01:31:18.445Z] Time:          Wed Nov 12 2025 19:31:18 GMT-0600 (Central Standard Time)
[debug] [2025-11-13T01:31:18.445Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-13T01:31:18.551Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-13T01:31:18.552Z] > authorizing via signed-in user (t.rahim@glyphplatforms.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2025-11-13T01:31:18.807Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-11-13T01:31:18.807Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-11-13T01:31:18.810Z] Emulator locator file path: /var/folders/p3/0wjcjv0s06l0bm7s4xmvwkj00000gn/T/hub-ndcpharma-8f3c6.json
[debug] [2025-11-13T01:31:18.810Z] [hub] writing locator at /var/folders/p3/0wjcjv0s06l0bm7s4xmvwkj00000gn/T/hub-ndcpharma-8f3c6.json
[debug] [2025-11-13T01:31:19.059Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-11-13T01:31:19.059Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-11-13T01:31:19.059Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-11-13T01:31:19.059Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect"}}
[debug] [2025-11-13T01:31:19.067Z] defaultcredentials: writing to file /Users/tahmeedrahim/.config/firebase/t_rahim_glyphplatforms.com_application_default_credentials.json
[debug] [2025-11-13T01:31:19.067Z] Setting GAC to /Users/tahmeedrahim/.config/firebase/t_rahim_glyphplatforms.com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/tahmeedrahim/.config/firebase/t_rahim_glyphplatforms.com_application_default_credentials.json"}}
[debug] [2025-11-13T01:31:19.068Z] Checked if tokens are valid: false, expires at: 1762997114323
[debug] [2025-11-13T01:31:19.068Z] Checked if tokens are valid: false, expires at: 1762997114323
[debug] [2025-11-13T01:31:19.068Z] > refreshing access token with scopes: []
[debug] [2025-11-13T01:31:19.069Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-11-13T01:31:19.069Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-13T01:31:19.203Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-11-13T01:31:19.204Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-11-13T01:31:19.218Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ndcpharma-8f3c6/adminSdkConfig [none]
[debug] [2025-11-13T01:31:19.407Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ndcpharma-8f3c6/adminSdkConfig 200
[debug] [2025-11-13T01:31:19.408Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ndcpharma-8f3c6/adminSdkConfig {"projectId":"ndcpharma-8f3c6","storageBucket":"ndcpharma-8f3c6.firebasestorage.app"}
[info] i  functions: Watching "/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions\" for Cloud Functions..."}}
[debug] [2025-11-13T01:31:19.436Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-13T01:31:19.957Z] > [functions] package.json contents: {
  "name": "@ndc/functions",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/index.cjs",
  "scripts": {
    "clean": "rimraf dist",
    "build": "pnpm clean && node esbuild.config.js",
    "serve": "pnpm build && firebase emulators:start --only functions",
    "deploy": "pnpm build && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage",
    "lint": "eslint src",
    "lint:fix": "eslint src --fix"
  },
  "dependencies": {
    "@ndc/api-contracts": "workspace:*",
    "@ndc/clients-rxnorm": "workspace:*",
    "@ndc/core-config": "workspace:*",
    "@ndc/core-guardrails": "workspace:*",
    "@ndc/domain-ndc": "workspace:*",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^4.6.0",
    "helmet": "^7.1.0",
    "zod": "^3.22.4"
  },
  "devDependencies": {
    "@types/cors": "^2.8.17",
    "@types/express": "^4.17.21",
    "@types/node": "^20.11.0",
    "@typescript-eslint/eslint-plugin": "^6.19.0",
    "@typescript-eslint/parser": "^6.19.0",
    "esbuild": "^0.27.0",
    "eslint": "^8.56.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-prettier": "^5.1.3",
    "prettier": "^3.2.4",
    "tsx": "^4.7.0",
    "typescript": "^5.3.3"
  },
  "engines": {
    "node": "18"
  }
}
[debug] [2025-11-13T01:31:19.957Z] Building nodejs source
[debug] [2025-11-13T01:31:19.957Z] Failed to find version of module node: reached end of search path /Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "22". Using node@22 from host. 
[info] i  functions: You are using a version of firebase-functions SDK (4.9.0) that does not have support for the newest Firebase Extensions features. Please update firebase-functions SDK to >=5.1.0 to use them correctly 
[debug] [2025-11-13T01:31:19.959Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-13T01:31:19.966Z] Found firebase-functions binary at '/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8023

[info] [2025-11-13T01:31:20.286Z] INFO: NDC Calculator functions initialized
  Context: {
  "service": "functions-main"
}

[debug] [2025-11-13T01:31:20.289Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":512,"timeoutSeconds":60,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"region":["us-central1"],"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/ndcpharma-8f3c6/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"http function initialized (http://127.0.0.1:5001/ndcpharma-8f3c6/us-central1/api)."}}
[debug] [2025-11-13T01:31:30.317Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-11-13T01:31:34.845Z] [work-queue] {"queuedWork":["/ndcpharma-8f3c6/us-central1/api/v1/health-2025-11-13T01:31:34.845Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-11-13T01:31:34.845Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ndcpharma-8f3c6/us-central1/api/v1/health-2025-11-13T01:31:34.845Z"],"workRunningCount":1}
[debug] [2025-11-13T01:31:34.846Z] Accepted request GET /ndcpharma-8f3c6/us-central1/api/v1/health --> us-central1-api
[debug] [2025-11-13T01:31:34.846Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-11-13T01:31:34.846Z] [functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/health, mapping to path=/v1/health {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/health, mapping to path=/v1/health"}}
[debug] [2025-11-13T01:31:34.848Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-11-13T01:31:34.848Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-11-13T01:31:35.422Z] [runtime-status] [12300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-11-13T01:31:35.422Z] [runtime-status] [12300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-11-13T01:31:35.422Z] [runtime-status] [12300] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-11-13T01:31:35.422Z] [runtime-status] [12300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-11-13T01:31:35.563Z] [runtime-status] [12300] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-11-13T01:31:35.563Z] [runtime-status] [12300] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2025-11-13T01:31:35.563Z] [runtime-status] [12300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-11-13T01:31:35.564Z] [runtime-status] [12300] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-11-13T01:31:35.565Z] [runtime-status] [12300] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.9.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.9.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-functions@4.9.0_firebase-admin@12.7.0/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-11-13T01:31:35.565Z] [runtime-status] [12300] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"/Users/tahmeedrahim/Documents/Projects/NDC/node_modules/.pnpm/firebase-admin@12.7.0/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  [2025-11-13T01:31:35.598Z] INFO: NDC Calculator functions initialized {"user":"[2025-11-13T01:31:35.598Z] INFO: NDC Calculator functions initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:35.598Z] INFO: NDC Calculator functions initialized"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "functions-main" {"user":"  \"service\": \"functions-main\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"functions-main\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[debug] [2025-11-13T01:31:35.600Z] [runtime-status] [12300] Functions runtime initialized. {"cwd":"/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions","node_version":"22.21.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Functions runtime initialized. {\"cwd\":\"/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions\",\"node_version\":\"22.21.0\"}"}}
[debug] [2025-11-13T01:31:35.600Z] [runtime-status] [12300] Listening to port: /var/folders/p3/0wjcjv0s06l0bm7s4xmvwkj00000gn/T/fire_emu_164fbbde233c0a52.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12300] Listening to port: /var/folders/p3/0wjcjv0s06l0bm7s4xmvwkj00000gn/T/fire_emu_164fbbde233c0a52.sock"}}
[debug] [2025-11-13T01:31:35.664Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE"}}
[debug] [2025-11-13T01:31:35.664Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-11-13T01:31:35.664Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY"}}
[info] >  [2025-11-13T01:31:35.666Z] INFO: Request received {"user":"[2025-11-13T01:31:35.666Z] INFO: Request received","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:35.666Z] INFO: Request received"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "GET", {"user":"  \"method\": \"GET\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"GET\","}}
[info] >    "path": "/v1/health", {"user":"  \"path\": \"/v1/health\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/health\","}}
[info] >    "userAgent": "curl/8.7.1" {"user":"  \"userAgent\": \"curl/8.7.1\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"userAgent\": \"curl/8.7.1\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:35.667Z] INFO: Normalizing drug: aspirin {"user":"[2025-11-13T01:31:35.667Z] INFO: Normalizing drug: aspirin","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:35.667Z] INFO: Normalizing drug: aspirin"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:36.038Z] INFO: Drug normalized via exact match: aspirin → 1191 {"user":"[2025-11-13T01:31:36.038Z] INFO: Drug normalized via exact match: aspirin → 1191","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:36.038Z] INFO: Drug normalized via exact match: aspirin → 1191"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:36.433Z] ERROR: FDA API Error: Request failed with status code 404 {"user":"[2025-11-13T01:31:36.433Z] ERROR: FDA API Error: Request failed with status code 404","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:36.433Z] ERROR: FDA API Error: Request failed with status code 404"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "url": "/drug/ndc.json", {"user":"  \"url\": \"/drug/ndc.json\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"url\": \"/drug/ndc.json\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:36.433Z] ERROR: No results found in FDA database {"user":"[2025-11-13T01:31:36.433Z] ERROR: No results found in FDA database","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:36.433Z] ERROR: No results found in FDA database"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "operation": "searchByPackageNDC", {"user":"  \"operation\": \"searchByPackageNDC\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"operation\": \"searchByPackageNDC\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "packageNdc": "00071-0156-23", {"user":"  \"packageNdc\": \"00071-0156-23\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"packageNdc\": \"00071-0156-23\","}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\n    at async FDAService.searchByPackageNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34909:24)\n    at async FDAClient.getNDCDetails (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35460:22)\n    at async FDAClient.validateNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35490:23)\n    at async healthCheck (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35621:22)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByPackageNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34909:24)\\n    at async FDAClient.getNDCDetails (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35460:22)\\n    at async FDAClient.validateNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35490:23)\\n    at async healthCheck (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35621:22)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByPackageNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34909:24)\\n    at async FDAClient.getNDCDetails (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35460:22)\\n    at async FDAClient.validateNDC (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35490:23)\\n    at async healthCheck (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35621:22)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:36.433Z] INFO: Health check completed {"user":"[2025-11-13T01:31:36.433Z] INFO: Health check completed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:36.433Z] INFO: Health check completed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "HealthCheck", {"user":"  \"service\": \"HealthCheck\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"HealthCheck\","}}
[info] >    "status": "healthy", {"user":"  \"status\": \"healthy\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": \"healthy\","}}
[info] >    "executionTime": 766 {"user":"  \"executionTime\": 766","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 766"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:36.434Z] INFO: Request completed {"user":"[2025-11-13T01:31:36.434Z] INFO: Request completed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:36.434Z] INFO: Request completed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "GET", {"user":"  \"method\": \"GET\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"GET\","}}
[info] >    "path": "/v1/health", {"user":"  \"path\": \"/v1/health\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/health\","}}
[info] >    "statusCode": 200, {"user":"  \"statusCode\": 200,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"statusCode\": 200,"}}
[info] >    "executionTime": 768 {"user":"  \"executionTime\": 768","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 768"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[debug] [2025-11-13T01:31:36.437Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 773.575709ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 773.575709ms"}}
[debug] [2025-11-13T01:31:36.439Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE"}}
[debug] [2025-11-13T01:31:36.439Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-11-13T01:31:36.439Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-11-13T01:31:36.439Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-11-13T01:31:44.838Z] [work-queue] {"queuedWork":["/ndcpharma-8f3c6/us-central1/api/v1/calculate-2025-11-13T01:31:44.838Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-11-13T01:31:44.839Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ndcpharma-8f3c6/us-central1/api/v1/calculate-2025-11-13T01:31:44.838Z"],"workRunningCount":1}
[debug] [2025-11-13T01:31:44.839Z] Accepted request POST /ndcpharma-8f3c6/us-central1/api/v1/calculate --> us-central1-api
[debug] [2025-11-13T01:31:44.840Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-11-13T01:31:44.840Z] [functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/calculate, mapping to path=/v1/calculate {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/calculate, mapping to path=/v1/calculate"}}
[debug] [2025-11-13T01:31:44.840Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-11-13T01:31:44.841Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY"}}
[info] >  [2025-11-13T01:31:44.850Z] INFO: Request received {"user":"[2025-11-13T01:31:44.850Z] INFO: Request received","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:44.850Z] INFO: Request received"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "POST", {"user":"  \"method\": \"POST\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"POST\","}}
[info] >    "path": "/v1/calculate", {"user":"  \"path\": \"/v1/calculate\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/calculate\","}}
[info] >    "userAgent": "curl/8.7.1" {"user":"  \"userAgent\": \"curl/8.7.1\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"userAgent\": \"curl/8.7.1\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:44.851Z] INFO: Starting NDC calculation {"user":"[2025-11-13T01:31:44.851Z] INFO: Starting NDC calculation","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:44.851Z] INFO: Starting NDC calculation"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "drug": { {"user":"  \"drug\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"drug\": {"}}
[info] >      "name": "Lisinopril" {"user":"    \"name\": \"Lisinopril\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"Lisinopril\""}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    },"}}
[info] >    "daysSupply": 30 {"user":"  \"daysSupply\": 30","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"daysSupply\": 30"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:44.851Z] INFO: Normalizing drug: Lisinopril {"user":"[2025-11-13T01:31:44.851Z] INFO: Normalizing drug: Lisinopril","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:44.851Z] INFO: Normalizing drug: Lisinopril"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:45.151Z] INFO: Drug normalized via exact match: Lisinopril → 29046 {"user":"[2025-11-13T01:31:45.151Z] INFO: Drug normalized via exact match: Lisinopril → 29046","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.151Z] INFO: Drug normalized via exact match: Lisinopril → 29046"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:45.151Z] INFO: Drug normalized successfully {"user":"[2025-11-13T01:31:45.151Z] INFO: Drug normalized successfully","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.151Z] INFO: Drug normalized successfully"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "originalName": "Lisinopril", {"user":"  \"originalName\": \"Lisinopril\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"originalName\": \"Lisinopril\","}}
[info] >    "normalizedName": "lisinopril", {"user":"  \"normalizedName\": \"lisinopril\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"normalizedName\": \"lisinopril\","}}
[info] >    "rxcui": "29046", {"user":"  \"rxcui\": \"29046\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"rxcui\": \"29046\","}}
[info] >    "confidence": 1 {"user":"  \"confidence\": 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"confidence\": 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:45.471Z] ERROR: FDA API Error: Request failed with status code 404 {"user":"[2025-11-13T01:31:45.471Z] ERROR: FDA API Error: Request failed with status code 404","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.471Z] ERROR: FDA API Error: Request failed with status code 404"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "url": "/drug/ndc.json", {"user":"  \"url\": \"/drug/ndc.json\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"url\": \"/drug/ndc.json\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:45.471Z] ERROR: No results found in FDA database {"user":"[2025-11-13T01:31:45.471Z] ERROR: No results found in FDA database","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.471Z] ERROR: No results found in FDA database"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "operation": "searchByRxCUI", {"user":"  \"operation\": \"searchByRxCUI\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"operation\": \"searchByRxCUI\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "rxcui": "29046", {"user":"  \"rxcui\": \"29046\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"rxcui\": \"29046\","}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:45.471Z] ERROR: Calculation failed {"user":"[2025-11-13T01:31:45.471Z] ERROR: Calculation failed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.471Z] ERROR: Calculation failed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "request": { {"user":"  \"request\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"request\": {"}}
[info] >      "drug": { {"user":"    \"drug\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"drug\": {"}}
[info] >        "name": "Lisinopril" {"user":"      \"name\": \"Lisinopril\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"name\": \"Lisinopril\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      },"}}
[info] >      "sig": { {"user":"    \"sig\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"sig\": {"}}
[info] >        "dose": 1, {"user":"      \"dose\": 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"dose\": 1,"}}
[info] >        "frequency": 1, {"user":"      \"frequency\": 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"frequency\": 1,"}}
[info] >        "unit": "tablet" {"user":"      \"unit\": \"tablet\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"unit\": \"tablet\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      },"}}
[info] >      "daysSupply": 30 {"user":"    \"daysSupply\": 30","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"daysSupply\": 30"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    },"}}
[info] >    "executionTime": 620, {"user":"  \"executionTime\": 620,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 620,"}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "Error", {"user":"    \"name\": \"Error\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"Error\","}}
[info] >      "message": "No results found in FDA database", {"user":"    \"message\": \"No results found in FDA database\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"No results found in FDA database\","}}
[info] >      "stack": "Error: No results found in FDA database\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)" {"user":"    \"stack\": \"Error: No results found in FDA database\\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"Error: No results found in FDA database\\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[debug] [2025-11-13T01:31:45.474Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 633.758375ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 633.758375ms"}}
[debug] [2025-11-13T01:31:45.475Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE"}}
[debug] [2025-11-13T01:31:45.475Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-11-13T01:31:45.475Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-11-13T01:31:45.475Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  [2025-11-13T01:31:45.472Z] INFO: Request completed {"user":"[2025-11-13T01:31:45.472Z] INFO: Request completed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:45.472Z] INFO: Request completed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "POST", {"user":"  \"method\": \"POST\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"POST\","}}
[info] >    "path": "/v1/calculate", {"user":"  \"path\": \"/v1/calculate\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/calculate\","}}
[info] >    "statusCode": 500, {"user":"  \"statusCode\": 500,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"statusCode\": 500,"}}
[info] >    "executionTime": 622 {"user":"  \"executionTime\": 622","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 622"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[debug] [2025-11-13T01:31:51.551Z] [work-queue] {"queuedWork":["/ndcpharma-8f3c6/us-central1/api/v1/calculate-2025-11-13T01:31:51.551Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-11-13T01:31:51.552Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/ndcpharma-8f3c6/us-central1/api/v1/calculate-2025-11-13T01:31:51.551Z"],"workRunningCount":1}
[debug] [2025-11-13T01:31:51.552Z] Accepted request POST /ndcpharma-8f3c6/us-central1/api/v1/calculate --> us-central1-api
[debug] [2025-11-13T01:31:51.553Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-11-13T01:31:51.553Z] [functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/calculate, mapping to path=/v1/calculate {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/ndcpharma-8f3c6/us-central1/api/v1/calculate, mapping to path=/v1/calculate"}}
[debug] [2025-11-13T01:31:51.553Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-11-13T01:31:51.553Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: BUSY"}}
[info] >  [2025-11-13T01:31:51.554Z] INFO: Request received {"user":"[2025-11-13T01:31:51.554Z] INFO: Request received","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:51.554Z] INFO: Request received"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "POST", {"user":"  \"method\": \"POST\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"POST\","}}
[info] >    "path": "/v1/calculate", {"user":"  \"path\": \"/v1/calculate\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/calculate\","}}
[info] >    "userAgent": "curl/8.7.1" {"user":"  \"userAgent\": \"curl/8.7.1\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"userAgent\": \"curl/8.7.1\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:51.555Z] INFO: Starting NDC calculation {"user":"[2025-11-13T01:31:51.555Z] INFO: Starting NDC calculation","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:51.555Z] INFO: Starting NDC calculation"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "drug": { {"user":"  \"drug\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"drug\": {"}}
[info] >      "name": "Lisinopril" {"user":"    \"name\": \"Lisinopril\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"Lisinopril\""}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    },"}}
[info] >    "daysSupply": 30 {"user":"  \"daysSupply\": 30","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"daysSupply\": 30"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:51.555Z] INFO: Normalizing drug: Lisinopril {"user":"[2025-11-13T01:31:51.555Z] INFO: Normalizing drug: Lisinopril","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:51.555Z] INFO: Normalizing drug: Lisinopril"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:51.956Z] INFO: Drug normalized via exact match: Lisinopril → 29046 {"user":"[2025-11-13T01:31:51.956Z] INFO: Drug normalized via exact match: Lisinopril → 29046","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:51.956Z] INFO: Drug normalized via exact match: Lisinopril → 29046"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "DrugNormalizer" {"user":"  \"service\": \"DrugNormalizer\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"DrugNormalizer\""}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:51.956Z] INFO: Drug normalized successfully {"user":"[2025-11-13T01:31:51.956Z] INFO: Drug normalized successfully","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:51.956Z] INFO: Drug normalized successfully"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "originalName": "Lisinopril", {"user":"  \"originalName\": \"Lisinopril\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"originalName\": \"Lisinopril\","}}
[info] >    "normalizedName": "lisinopril", {"user":"  \"normalizedName\": \"lisinopril\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"normalizedName\": \"lisinopril\","}}
[info] >    "rxcui": "29046", {"user":"  \"rxcui\": \"29046\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"rxcui\": \"29046\","}}
[info] >    "confidence": 1 {"user":"  \"confidence\": 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"confidence\": 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:52.276Z] ERROR: FDA API Error: Request failed with status code 404 {"user":"[2025-11-13T01:31:52.276Z] ERROR: FDA API Error: Request failed with status code 404","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:52.276Z] ERROR: FDA API Error: Request failed with status code 404"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "url": "/drug/ndc.json", {"user":"  \"url\": \"/drug/ndc.json\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"url\": \"/drug/ndc.json\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:52.276Z] ERROR: No results found in FDA database {"user":"[2025-11-13T01:31:52.276Z] ERROR: No results found in FDA database","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:52.276Z] ERROR: No results found in FDA database"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "FDAService", {"user":"  \"service\": \"FDAService\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"FDAService\","}}
[info] >    "operation": "searchByRxCUI", {"user":"  \"operation\": \"searchByRxCUI\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"operation\": \"searchByRxCUI\","}}
[info] >    "status": 404, {"user":"  \"status\": 404,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"status\": 404,"}}
[info] >    "rxcui": "29046", {"user":"  \"rxcui\": \"29046\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"rxcui\": \"29046\","}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "AxiosError", {"user":"    \"name\": \"AxiosError\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"AxiosError\","}}
[info] >      "message": "Request failed with status code 404", {"user":"    \"message\": \"Request failed with status code 404\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"Request failed with status code 404\","}}
[info] >      "stack": "AxiosError: Request failed with status code 404\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\n    at Unzip.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)" {"user":"    \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"AxiosError: Request failed with status code 404\\n    at settle (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:31437:12)\\n    at Unzip.handleStreamEnd (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:32494:11)\\n    at Unzip.emit (node:events:519:28)\\n    at endReadableNT (node:internal/streams/readable:1698:12)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\\n    at Axios.request (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:33390:41)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAService.executeWithRetry (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34978:26)\\n    at async FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34845:24)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[info] >  [2025-11-13T01:31:52.276Z] ERROR: Calculation failed {"user":"[2025-11-13T01:31:52.276Z] ERROR: Calculation failed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:52.276Z] ERROR: Calculation failed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "CalculateEndpoint", {"user":"  \"service\": \"CalculateEndpoint\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"CalculateEndpoint\","}}
[info] >    "request": { {"user":"  \"request\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"request\": {"}}
[info] >      "drug": { {"user":"    \"drug\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"drug\": {"}}
[info] >        "name": "Lisinopril" {"user":"      \"name\": \"Lisinopril\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"name\": \"Lisinopril\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      },"}}
[info] >      "sig": { {"user":"    \"sig\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"sig\": {"}}
[info] >        "dose": 1, {"user":"      \"dose\": 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"dose\": 1,"}}
[info] >        "frequency": 1, {"user":"      \"frequency\": 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"frequency\": 1,"}}
[info] >        "unit": "tablet" {"user":"      \"unit\": \"tablet\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">        \"unit\": \"tablet\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      },"}}
[info] >      "daysSupply": 30 {"user":"    \"daysSupply\": 30","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"daysSupply\": 30"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    },"}}
[info] >    "executionTime": 721, {"user":"  \"executionTime\": 721,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 721,"}}
[info] >    "error": { {"user":"  \"error\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"error\": {"}}
[info] >      "name": "Error", {"user":"    \"name\": \"Error\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"name\": \"Error\","}}
[info] >      "message": "No results found in FDA database", {"user":"    \"message\": \"No results found in FDA database\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"message\": \"No results found in FDA database\","}}
[info] >      "stack": "Error: No results found in FDA database\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)" {"user":"    \"stack\": \"Error: No results found in FDA database\\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">      \"stack\": \"Error: No results found in FDA database\\n    at FDAService.handleError (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35030:27)\\n    at FDAService.searchByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:34864:18)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at async FDAClient.getNDCsByRxCUI (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35420:22)\\n    at async calculateHandler (/Users/tahmeedrahim/Documents/Projects/NDC/apps/functions/dist/index.cjs:35748:25)\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
[debug] [2025-11-13T01:31:52.280Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 727.014791ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 727.014791ms"}}
[debug] [2025-11-13T01:31:52.280Z] [worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-dd28715b-67a1-4b5c-92e0-e7641dc21ac8]: IDLE"}}
[debug] [2025-11-13T01:31:52.281Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-11-13T01:31:52.281Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-11-13T01:31:52.281Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  [2025-11-13T01:31:52.277Z] INFO: Request completed {"user":"[2025-11-13T01:31:52.277Z] INFO: Request completed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  [2025-11-13T01:31:52.277Z] INFO: Request completed"}}
[info] >    Context: { {"user":"  Context: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    Context: {"}}
[info] >    "service": "redaction-middleware", {"user":"  \"service\": \"redaction-middleware\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"service\": \"redaction-middleware\","}}
[info] >    "method": "POST", {"user":"  \"method\": \"POST\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"method\": \"POST\","}}
[info] >    "path": "/v1/calculate", {"user":"  \"path\": \"/v1/calculate\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"path\": \"/v1/calculate\","}}
[info] >    "statusCode": 500, {"user":"  \"statusCode\": 500,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"statusCode\": 500,"}}
[info] >    "executionTime": 723 {"user":"  \"executionTime\": 723","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">    \"executionTime\": 723"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":">  }"}}
